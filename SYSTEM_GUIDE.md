# –†–£–ö–û–í–û–î–°–¢–í–û –ü–û –°–ò–°–¢–ï–ú–ï –ö–û–ù–¢–†–û–õ–Ø –ü–û–î–†–Ø–î–ß–ò–ö–û–í

## –û–ì–õ–ê–í–õ–ï–ù–ò–ï
1. [–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–æ–±—â–∞—è-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
2. [–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π](#—Ä–æ–ª–∏-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
3. [–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏](#–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
4. [–û–±—ä–µ–∫—Ç—ã —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞](#–æ–±—ä–µ–∫—Ç—ã-—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞)
5. [–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞–±–æ—Ç (Work Templates)](#—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫-—Ä–∞–±–æ—Ç-work-templates)
6. [–†–∞–±–æ—Ç—ã –Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö](#—Ä–∞–±–æ—Ç—ã-–Ω–∞-–æ–±—ä–µ–∫—Ç–∞—Ö)
7. [–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç](#–∂–∏–∑–Ω–µ–Ω–Ω—ã–π-—Ü–∏–∫–ª-—Ä–∞–±–æ—Ç)
8. [–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞](#–ø—Ä–∞–≤–∞-–¥–æ—Å—Ç—É–ø–∞)
9. [–°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏](#—Å–≤—è–∑–∏-–º–µ–∂–¥—É-—Å—É—â–Ω–æ—Å—Ç—è–º–∏)

---

## –û–ë–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ —Ä–∞–±–æ—Ç–∞–º–∏ –Ω–∞ –Ω–∏—Ö —á–µ—Ä–µ–∑ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏. –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è:

```
–û–†–ì–ê–ù–ò–ó–ê–¶–ò–Ø –ó–ê–ö–ê–ó–ß–ò–ö–ê (Organization, type=client)
  ‚îî‚îÄ‚îÄ –û–ë–™–ï–ö–¢ –°–¢–†–û–ò–¢–ï–õ–¨–°–¢–í–ê (Object)
       ‚îî‚îÄ‚îÄ –†–ê–ë–û–¢–ê (Work)
            ‚îî‚îÄ‚îÄ –ù–∞–∑–Ω–∞—á–µ–Ω–∞ –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò –ü–û–î–†–Ø–î–ß–ò–ö–ê (Organization, type=contractor)
                 ‚îî‚îÄ‚îÄ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ (Users —á–µ—Ä–µ–∑ user_organizations)
```

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –≤–ª–∞–¥–µ—é—Ç –æ–±—ä–µ–∫—Ç–∞–º–∏ –∏ —Ä–∞–±–æ—Ç–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ:
- –û–±—ä–µ–∫—Ç—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ **–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º –∑–∞–∫–∞–∑—á–∏–∫–∞**
- –†–∞–±–æ—Ç—ã –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è **–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º –ø–æ–¥—Ä—è–¥—á–∏–∫–∞**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —è–≤–ª—è—é—Ç—Å—è **—Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç

---

## –†–û–õ–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô

### –£—Ä–æ–≤–Ω–∏ —Ä–æ–ª–µ–π:

#### 1. –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ (users.role):
- **client** ‚Äî —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞
- **contractor** ‚Äî —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **admin** ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã

#### 2. –†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (user_organizations.role):
- **owner** ‚Äî –≤–ª–∞–¥–µ–ª–µ—Ü –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (—Å–æ–∑–¥–∞—Ç–µ–ª—å)
- **admin** ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- **employee** ‚Äî —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

**–ü—Ä–∏–º–µ—Ä 1: –ó–∞–∫–∞–∑—á–∏–∫**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ò–≤–∞–Ω–æ–≤ –ò.–ò.
  ‚îú‚îÄ‚îÄ users.role = "client"
  ‚îî‚îÄ‚îÄ –°–æ—Å—Ç–æ–∏—Ç –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:
       ‚îî‚îÄ‚îÄ "–û–û–û –°—Ç—Ä–æ–π-–ò–Ω–≤–µ—Å—Ç" (type=client)
            ‚îî‚îÄ‚îÄ user_organizations.role = "owner"
```
–ò–≤–∞–Ω–æ–≤ –≤–∏–¥–∏—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ "–û–û–û –°—Ç—Ä–æ–π-–ò–Ω–≤–µ—Å—Ç" –∏ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ.

**–ü—Ä–∏–º–µ—Ä 2: –ü–æ–¥—Ä—è–¥—á–∏–∫**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ü–µ—Ç—Ä–æ–≤ –ü.–ü.
  ‚îú‚îÄ‚îÄ users.role = "contractor"
  ‚îî‚îÄ‚îÄ –°–æ—Å—Ç–æ–∏—Ç –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:
       ‚îî‚îÄ‚îÄ "–û–û–û –ú–æ–Ω—Ç–∞–∂-–°—Ç—Ä–æ–π" (type=contractor)
            ‚îî‚îÄ‚îÄ user_organizations.role = "employee"
```
–ü–µ—Ç—Ä–æ–≤ –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç—ã, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ "–û–û–û –ú–æ–Ω—Ç–∞–∂-–°—Ç—Ä–æ–π".

---

## –û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò

### –ß—Ç–æ —Ç–∞–∫–æ–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è?
–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è ‚Äî —ç—Ç–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ (–∫–æ–º–ø–∞–Ω–∏—è, –ò–ü), –∫–æ—Ç–æ—Ä–æ–µ –≤—ã—Å—Ç—É–ø–∞–µ—Ç –∑–∞–∫–∞–∑—á–∏–∫–æ–º –∏–ª–∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–º –≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.

### –¢–∏–ø—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π:
- **client** ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–∑–∞–∫–∞–∑—á–∏–∫ (—Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç—ã, –∑–∞–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—ã)
- **contractor** ‚Äî –ø–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è (–≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–∞–±–æ—Ç—ã)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:
```
organizations:
  - id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
  - name (–Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
  - inn (–ò–ù–ù, —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
  - kpp (–ö–ü–ü)
  - ogrn (–û–ì–†–ù)
  - type (client / contractor)
  - legal_address (—é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å)
  - actual_address (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å)
  - phone (—Ç–µ–ª–µ—Ñ–æ–Ω)
  - email (email)
  - bik (–ë–ò–ö –±–∞–Ω–∫–∞)
  - bank_name (–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞)
  - payment_account (—Ä–∞—Å—á—ë—Ç–Ω—ã–π —Å—á—ë—Ç)
  - correspondent_account (–∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—Å–∫–∏–π —Å—á—ë—Ç)
  - director_name (–§–ò–û –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞)
  - director_position (–¥–æ–ª–∂–Ω–æ—Å—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∞)
  - status (active / inactive)
  - created_by (ID —Å–æ–∑–¥–∞—Ç–µ–ª—è)
  - created_at, updated_at
```

### –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π:
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `user_organizations`:

```
user_organizations:
  - id
  - user_id (—Å—Å—ã–ª–∫–∞ –Ω–∞ users)
  - organization_id (—Å—Å—ã–ª–∫–∞ –Ω–∞ organizations)
  - role (owner / admin / employee)
  - created_at
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö
- –í –∫–∞–∂–¥–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–≤–æ—è —Ä–æ–ª—å
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –í–°–ï–• –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç

### –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–∫–∞–∑—á–∏–∫–∞
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å `role = 'client'` —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ
2. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
3. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é" –∏–ª–∏ "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π"
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é"
5. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, "–û–û–û –°—Ç—Ä–æ–π-–ò–Ω–≤–µ—Å—Ç"
   - **–ò–ù–ù** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å)
   - **–ö–ü–ü, –û–ì–†–ù** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - **–Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å, —Ç–µ–ª–µ—Ñ–æ–Ω, email** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
6. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å"
7. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç:
   - –ó–∞–ø–∏—Å—å –≤ `organizations` —Å `type = 'client'`, `created_by = user_id`
   - –ó–∞–ø–∏—Å—å –≤ `user_organizations` —Å `role = 'owner'`
8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –ò–ù–ù
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ò–ù–ù –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
2. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –ï—Å–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí —Å–≤—è–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–µ–π
   - –ï—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç
3. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `user_organizations` —Å `role = 'employee'`

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
1. –í–ª–∞–¥–µ–ª–µ—Ü/–∞–¥–º–∏–Ω –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞"
3. –í–≤–æ–¥–∏—Ç email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
4. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –≤ `organization_invites`
5. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É/–∫–æ–¥ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
6. –ü–æ—Å–ª–µ –ø—Ä–∏–Ω—è—Ç–∏—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `user_organizations`

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º–∏:

#### –ö–∞–∫ –∑–∞–∫–∞–∑—á–∏–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ä—è–¥—á–∏–∫–∞:
1. –ó–∞–∫–∞–∑—á–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞–∑–¥–µ–ª "–ü–æ–¥—Ä—è–¥—á–∏–∫–∏"
2. –ù–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞"
3. –í–≤–æ–¥–∏—Ç –ò–ù–ù –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
4. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:
   - –ï—Å–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å —Ç–∞–∫–∏–º –ò–ù–ù —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î ‚Üí —Å–≤—è–∑—ã–≤–∞–µ—Ç
   - –ï—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é —Å `type = 'contractor'`
5. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `client_contractors`:
   ```
   client_id = ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–∫–∞–∑—á–∏–∫–∞
   contractor_id = ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞
   ```
6. –¢–µ–ø–µ—Ä—å –∑–∞–∫–∞–∑—á–∏–∫ –º–æ–∂–µ—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—ã —ç—Ç–æ–π –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**–¢–∞–±–ª–∏—Ü–∞ client_contractors:**
```
client_contractors:
  - id
  - client_id ‚Üí organizations.id (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∑–∞–∫–∞–∑—á–∏–∫–∞)
  - contractor_id ‚Üí organizations.id (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ–¥—Ä—è–¥—á–∏–∫–∞)
  - added_at
```

---

## –û–ë–™–ï–ö–¢–´ –°–¢–†–û–ò–¢–ï–õ–¨–°–¢–í–ê

### –ß—Ç–æ —Ç–∞–∫–æ–µ –æ–±—ä–µ–∫—Ç?
–û–±—ä–µ–∫—Ç ‚Äî —ç—Ç–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –º–µ—Å—Ç–æ, –≥–¥–µ –≤–µ–¥—É—Ç—Å—è —Ä–∞–±–æ—Ç—ã (–∑–¥–∞–Ω–∏–µ, –∫–æ—Ä–ø—É—Å, —É—á–∞—Å—Ç–æ–∫ –¥–æ—Ä–æ–≥–∏, —Å–æ–æ—Ä—É–∂–µ–Ω–∏–µ –∏ —Ç.–¥.).

**–ö—Ä–∏—Ç–∏—á–Ω–æ:** –û–±—ä–µ–∫—Ç—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –ù–ï –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∞ **–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º –∑–∞–∫–∞–∑—á–∏–∫–∞**.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞:
```
objects:
  - id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
  - title (–Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞)
  - address (–∞–¥—Ä–µ—Å)
  - description (–æ–ø–∏—Å–∞–Ω–∏–µ)
  - client_id (ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞) ‚Üí organizations.id
  - status (active/paused/completed)
  - created_at, updated_at
```

### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –æ–±—ä–µ–∫—Ç–∞–º–∏:

#### –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞) –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤
2. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç"
3. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:
   - **–ù–∞–∑–≤–∞–Ω–∏–µ** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, "–ñ–ö –°–æ–ª–Ω–µ—á–Ω—ã–π, –∫–æ—Ä–ø—É—Å 3"
   - **–ê–¥—Ä–µ—Å** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, 15"
   - **–û–ø–∏—Å–∞–Ω–∏–µ** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. –û–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è:
   - `client_id` = ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–æ—Å—Ç–æ–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
   - –°—Ç–∞—Ç—É—Å = `active`

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±—ä–µ–∫—Ç–æ–≤:

**–î–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –æ–±—ä–µ–∫—Ç—ã –í–°–ï–• –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç
- –ó–∞–ø—Ä–æ—Å:
  ```sql
  SELECT objects.*
  FROM objects
  JOIN user_organizations uo ON objects.client_id = uo.organization_id
  WHERE uo.user_id = current_user_id
  ```

**–î–ª—è –ø–æ–¥—Ä—è–¥—á–∏–∫–∞:**
- –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –æ–±—ä–µ–∫—Ç—ã, –≥–¥–µ –µ—Å—Ç—å —Ä–∞–±–æ—Ç—ã, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –µ–≥–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏(-—è–º)
- –ó–∞–ø—Ä–æ—Å:
  ```sql
  SELECT DISTINCT objects.*
  FROM objects
  JOIN works ON objects.id = works.object_id
  JOIN user_organizations uo ON works.contractor_organization_id = uo.organization_id
  WHERE uo.user_id = current_user_id
  ```

**–î–ª—è –∞–¥–º–∏–Ω–∞:**
- –í–∏–¥–∏—Ç –≤—Å–µ –æ–±—ä–µ–∫—Ç—ã –≤ —Å–∏—Å—Ç–µ–º–µ

#### –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞:
- –ú–æ–∂–µ—Ç –ª—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–≤–ª–∞–¥–µ–ª—å—Ü–∞ (–∑–∞–∫–∞–∑—á–∏–∫–∞)
- –ú–æ–∂–µ—Ç –∞–¥–º–∏–Ω —Å–∏—Å—Ç–µ–º—ã

#### –£–¥–∞–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞:
- –ú–æ–∂–µ—Ç –≤–ª–∞–¥–µ–ª–µ—Ü/–∞–¥–º–∏–Ω –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞
- –ú–æ–∂–µ—Ç –∞–¥–º–∏–Ω —Å–∏—Å—Ç–µ–º—ã
- –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ —É–¥–∞–ª—è—é—Ç—Å—è –≤—Å–µ –µ–≥–æ —Ä–∞–±–æ—Ç—ã (–∫–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ)

---

## –°–ü–†–ê–í–û–ß–ù–ò–ö –†–ê–ë–û–¢ (Work Templates)

### –ß—Ç–æ —ç—Ç–æ?
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞–±–æ—Ç ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ç–∏–ø–æ–≤—ã—Ö —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–±–æ—Ç —Å –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏. –≠—Ç–æ —à–∞–±–ª–æ–Ω—ã, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ—Ç–æ–º —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:
```
work_templates:
  - id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
  - code (–∫–æ–¥ —Ä–∞–±–æ—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä "–ö–°-01")
  - title (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã)
  - description (–ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ)
  - category (–∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞–±–æ—Ç—ã)
  - normative_ref (—Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–æ—Ä–º–∞—Ç–∏–≤—ã: –°–ù–∏–ü, –ì–û–°–¢ –∏ —Ç.–¥.)
  - material_types (—Ç–∏–ø—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤)
  - control_points (—Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON)
  - created_at
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ä–∞–±–æ—Ç:
- **–û–±—â–µ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã**
- **–ó–µ–º–ª—è–Ω—ã–µ —Ä–∞–±–æ—Ç—ã**
- **–ö–∞–º–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã**
- **–ë–µ—Ç–æ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã**
- **–ú–æ–Ω—Ç–∞–∂ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π**
- **–ö—Ä–æ–≤–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã**
- **–û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã**
- **–≠–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã**
- **–°–∞–Ω—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∞–±–æ—Ç—ã**
- **–í–µ–Ω—Ç–∏–ª—è—Ü–∏—è –∏ –∫–æ–Ω–¥–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**

### –¢–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è (control_points):
```json
[
  {
    "stage": "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞",
    "checks": ["–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏—è", "–†–∞–∑–º–µ—Ç–∫–∞ –æ—Å–µ–π"]
  },
  {
    "stage": "–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–±–æ—Ç—ã",
    "checks": ["–ö–æ–Ω—Ç—Ä–æ–ª—å —Ç–æ–ª—â–∏–Ω—ã —Å–ª–æ—è", "–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏"]
  },
  {
    "stage": "–ü—Ä–∏—ë–º–∫–∞",
    "checks": ["–í–∏–∑—É–∞–ª—å–Ω—ã–π –æ—Å–º–æ—Ç—Ä", "–ó–∞–º–µ—Ä—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π"]
  }
]
```

### –õ–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
- **–ü—Ä–æ—Å–º–æ—Ç—Ä:** –î–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã —Å–∏—Å—Ç–µ–º—ã
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞–±–æ—Ç (—Å–º. —Ä–∞–∑–¥–µ–ª "–†–∞–±–æ—Ç—ã –Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö")

---

## –†–ê–ë–û–¢–´ –ù–ê –û–ë–™–ï–ö–¢–ê–•

### –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–∞–±–æ—Ç–∞?
–†–∞–±–æ—Ç–∞ ‚Äî —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç–µ, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏.

**–ö—Ä–∏—Ç–∏—á–Ω–æ:** –†–∞–±–æ—Ç—ã –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è –ù–ï –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º, –∞ **–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º**.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç—ã:
```
works:
  - id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
  - title (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã)
  - description (–æ–ø–∏—Å–∞–Ω–∏–µ)
  - object_id (–∫ –∫–∞–∫–æ–º—É –æ–±—ä–µ–∫—Ç—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è) ‚Üí objects.id
  - contractor_id (ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞) ‚Üí organizations.id
  - contractor_organization_id (–¥—É–±–ª—å –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  - template_id (ID —à–∞–±–ª–æ–Ω–∞, –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û) ‚Üí work_templates.id
  - status (pending/in_progress/on_review/completed/rejected)
  - work_status (–¥—É–±–ª–∏—Ä—É—é—â–∏–π —Å—Ç–∞—Ç—É—Å)
  - start_date (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞)
  - end_date (—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è)
  - planned_start_date (–ø–ª–∞–Ω–æ–≤–∞—è –¥–∞—Ç–∞ –Ω–∞—á–∞–ª–∞)
  - planned_end_date (–ø–ª–∞–Ω–æ–≤–∞—è –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è)
  - completion_percentage (–ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 0-100)
  - photos (–º–∞—Å—Å–∏–≤ JSON —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏)
  - materials (–º–∞—Å—Å–∏–≤ JSON —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏)
  - created_at, updated_at
```

### –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã:

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –†–∞–±–æ—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —Ä–∞–±–æ—Ç (`work_templates`). –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—Ç –≤—Ä—É—á–Ω—É—é –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

#### –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞) –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –æ–±—ä–µ–∫—Ç
2. –ù–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É"
3. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å **—Å–ø–∏—Å–∫–æ–º —à–∞–±–ª–æ–Ω–æ–≤** –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ `work_templates`
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —à–∞–±–ª–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–í–æ–∑–≤–µ–¥–µ–Ω–∏–µ –∫–∏—Ä–ø–∏—á–Ω—ã—Ö —Å—Ç–µ–Ω")
5. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç:
   - –ù–∞–∑–≤–∞–Ω–∏–µ, –æ–ø–∏—Å–∞–Ω–∏–µ, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, —Ç–æ—á–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª—è ‚Äî –∏–∑ —à–∞–±–ª–æ–Ω–∞
   - `template_id` = ID –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ø–æ–ª–Ω—è–µ—Ç:
   - –ö–æ–Ω–∫—Ä–µ—Ç–∏–∑–∏—Ä—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–í–æ–∑–≤–µ–¥–µ–Ω–∏–µ –∫–∏—Ä–ø–∏—á–Ω—ã—Ö —Å—Ç–µ–Ω, 3 —ç—Ç–∞–∂, —Å–µ–∫—Ü–∏—è –ê")
   - **–í—ã–±–∏—Ä–∞–µ—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞** –∏–∑ —Å–ø–∏—Å–∫–∞ (—Å–º. `client_contractors`)
   - –£–∫–∞–∑—ã–≤–∞–µ—Ç –ø–ª–∞–Ω–æ–≤—ã–µ –¥–∞—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
7. –ù–∞–∂–∏–º–∞–µ—Ç "–°–æ–∑–¥–∞—Ç—å"
8. –†–∞–±–æ—Ç–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è:
   - `object_id` = ID —Ç–µ–∫—É—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞
   - `contractor_id` = ID –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞
   - `contractor_organization_id` = ID –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞ (–¥—É–±–ª—å)
   - `template_id` = ID —à–∞–±–ª–æ–Ω–∞
   - –°—Ç–∞—Ç—É—Å = `pending`

#### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ/–ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞:
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã –ø–æ–¥—Ä—è–¥—á–∏–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ù–ï –Ω–∞–∑–Ω–∞—á–µ–Ω (`contractor_id = NULL`)
- –ó–∞–∫–∞–∑—á–∏–∫ –º–æ–∂–µ—Ç –ø–æ–∑–∂–µ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –ø–æ–¥—Ä—è–¥–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
- –ó–∞–∫–∞–∑—á–∏–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ –¥—Ä—É–≥—É—é –ø–æ–¥—Ä—è–¥–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é
- –ü—Ä–∏ –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ `pending`

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–±–æ—Ç:

**–î–ª—è –∑–∞–∫–∞–∑—á–∏–∫–∞:**
- –í–∏–¥–∏—Ç –≤—Å–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö —Å–≤–æ–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
- –ó–∞–ø—Ä–æ—Å:
  ```sql
  SELECT works.*
  FROM works
  JOIN objects ON works.object_id = objects.id
  JOIN user_organizations uo ON objects.client_id = uo.organization_id
  WHERE uo.user_id = current_user_id
  ```

**–î–ª—è –ø–æ–¥—Ä—è–¥—á–∏–∫–∞:**
- –í–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç—ã, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç
- –ó–∞–ø—Ä–æ—Å:
  ```sql
  SELECT works.*
  FROM works
  JOIN user_organizations uo ON works.contractor_organization_id = uo.organization_id
  WHERE uo.user_id = current_user_id
  ```

---

## –ñ–ò–ó–ù–ï–ù–ù–´–ô –¶–ò–ö–õ –†–ê–ë–û–¢

### –°—Ç–∞—Ç—É—Å—ã —Ä–∞–±–æ—Ç—ã:
1. **pending** (–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞) ‚Äî —Ä–∞–±–æ—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –µ—â—ë –Ω–µ –Ω–∞—á–∞—Ç–∞
2. **in_progress** (–í —Ä–∞–±–æ—Ç–µ) ‚Äî –ø–æ–¥—Ä—è–¥—á–∏–∫ –Ω–∞—á–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
3. **on_review** (–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ) ‚Äî –ø–æ–¥—Ä—è–¥—á–∏–∫ –∑–∞–≤–µ—Ä—à–∏–ª, –∂–¥—ë—Ç –ø—Ä–∏—ë–º–∫–∏
4. **completed** (–í—ã–ø–æ–ª–Ω–µ–Ω–∞) ‚Äî —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∞ –∑–∞–∫–∞–∑—á–∏–∫–æ–º
5. **rejected** (–û—Ç–∫–ª–æ–Ω–µ–Ω–∞) ‚Äî —Ä–∞–±–æ—Ç–∞ –Ω–µ –ø—Ä–∏–Ω—è—Ç–∞, –Ω—É–∂–Ω—ã –¥–æ—Ä–∞–±–æ—Ç–∫–∏

### –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:
```
pending ‚Üí in_progress ‚Üí on_review ‚Üí completed
                            ‚Üì
                        rejected ‚Üí in_progress
```

### –ö—Ç–æ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Å—Ç–∞—Ç—É—Å—ã:

| –ü–µ—Ä–µ—Ö–æ–¥ | –ö—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç | –õ–æ–≥–∏–∫–∞ |
|---------|---------------|--------|
| `pending` ‚Üí `in_progress` | –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ | –ù–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç—É, —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è `start_date` |
| `in_progress` ‚Üí `on_review` | –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ | –ó–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É, —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è `end_date` |
| `on_review` ‚Üí `completed` | –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞, –ê–¥–º–∏–Ω | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–∞–±–æ—Ç—É |
| `on_review` ‚Üí `rejected` | –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞, –ê–¥–º–∏–Ω | –û—Ç–∫–ª–æ–Ω—è–µ—Ç —Å –ø—Ä–∏—á–∏–Ω–æ–π |
| `rejected` ‚Üí `in_progress` | –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ | –ë–µ—Ä—ë—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É |

### –î–µ—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:

#### 1. –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã (pending ‚Üí in_progress)
**–ö—Ç–æ:** –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–æ–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞:**
```sql
SELECT 1
FROM works w
JOIN user_organizations uo ON w.contractor_organization_id = uo.organization_id
WHERE w.id = work_id AND uo.user_id = current_user_id
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É"
3. –°–∏—Å—Ç–µ–º–∞ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `in_progress`, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `start_date = today`
4. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–∑–∞–∫–∞–∑—á–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

#### 2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã (in_progress ‚Üí on_review)
**–ö—Ç–æ:** –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `completion_percentage = 100`
3. –ù–∞–∂–∏–º–∞–µ—Ç "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É"
4. –°–∏—Å—Ç–µ–º–∞ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `on_review`, –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç `end_date = today`
5. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–∑–∞–∫–∞–∑—á–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

#### 3. –ü—Ä–∏—ë–º–∫–∞ —Ä–∞–±–æ—Ç—ã (on_review ‚Üí completed)
**–ö—Ç–æ:** –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞, –∞–¥–º–∏–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞:**
```sql
SELECT 1
FROM works w
JOIN objects o ON w.object_id = o.id
JOIN user_organizations uo ON o.client_id = uo.organization_id
WHERE w.id = work_id AND uo.user_id = current_user_id
```

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –∑–∞–∫–∞–∑—á–∏–∫–∞ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Ñ–æ—Ç–æ, –æ–ø–∏—Å–∞–Ω–∏–µ, –º–∞—Ç–µ—Ä–∏–∞–ª—ã
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ü—Ä–∏–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É"
3. –°–∏—Å—Ç–µ–º–∞ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `completed`
4. –ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

---

#### 4. –û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã (on_review ‚Üí rejected)
**–ö—Ç–æ:** –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞, –∞–¥–º–∏–Ω

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –∑–∞–∫–∞–∑—á–∏–∫–∞ –≤–∏–¥–∏—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º
2. –ù–∞–∂–∏–º–∞–µ—Ç "–û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ä–∞–±–æ—Ç—É"
3. –£–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
4. –°–∏—Å—Ç–µ–º–∞ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `rejected`, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–∏—á–∏–Ω—É
5. –ü–æ–¥—Ä—è–¥–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –ø—Ä–∏—á–∏–Ω–æ–π

---

#### 5. –î–æ—Ä–∞–±–æ—Ç–∫–∞ (rejected ‚Üí in_progress)
**–ö—Ç–æ:** –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ —á–∏—Ç–∞–µ—Ç –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è
2. –ù–∞–∂–∏–º–∞–µ—Ç "–í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É"
3. –°–∏—Å—Ç–µ–º–∞ –º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –Ω–∞ `in_progress`
4. –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–º–µ—á–∞–Ω–∏—è, —Å–Ω–æ–≤–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É

---

## –ü–†–ê–í–ê –î–û–°–¢–£–ü–ê

### –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:

| –î–µ–π—Å—Ç–≤–∏–µ | –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥-—Ü–∏–∏ –∑–∞–∫–∞–∑—á–∏–∫–∞ | –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥-—Ü–∏–∏ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ | –ê–¥–º–∏–Ω |
|----------|----------------------------|------------------------------|-------|
| **–û–†–ì–ê–ù–ò–ó–ê–¶–ò–ò** |
| –°–æ–∑–¥–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é | ‚úÖ | ‚úÖ | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ | ‚úÖ | ‚úÖ | ‚úÖ (–≤—Å–µ) |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é | ‚úÖ (owner/admin) | ‚úÖ (owner/admin) | ‚úÖ |
| –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ | ‚úÖ (owner/admin) | ‚úÖ (owner/admin) | ‚úÖ |
| –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ | ‚úÖ | ‚ùå | ‚úÖ |
| **–û–ë–™–ï–ö–¢–´** |
| –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç | ‚úÖ | ‚ùå | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ–±—ä–µ–∫—Ç—ã | ‚úÖ (—Å–≤–æ–∏—Ö –æ—Ä–≥-—Ü–∏–π) | ‚úÖ (–≥–¥–µ –µ—Å—Ç—å —Ä–∞–±–æ—Ç—ã) | ‚úÖ (–≤—Å–µ) |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç | ‚úÖ | ‚ùå | ‚úÖ |
| –£–¥–∞–ª–∏—Ç—å –æ–±—ä–µ–∫—Ç | ‚úÖ | ‚ùå | ‚úÖ |
| **–†–ê–ë–û–¢–´** |
| –°–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—Ç—É | ‚úÖ | ‚ùå | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–±–æ—Ç—ã | ‚úÖ (–Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö —Å–≤–æ–∏—Ö –æ—Ä–≥-—Ü–∏–π) | ‚úÖ (—Å–≤–æ–∏—Ö –æ—Ä–≥-—Ü–∏–π) | ‚úÖ (–≤—Å–µ) |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É | ‚úÖ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–∞—Ç—ã) | ‚ö†Ô∏è (—Ñ–æ—Ç–æ/–º–∞—Ç–µ—Ä–∏–∞–ª—ã/%) | ‚úÖ |
| –ù–∞–∑–Ω–∞—á–∏—Ç—å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞ | ‚úÖ | ‚ùå | ‚úÖ |
| –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É | ‚ùå | ‚úÖ | ‚úÖ |
| –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É | ‚ùå | ‚úÖ | ‚úÖ |
| –ü—Ä–∏–Ω—è—Ç—å —Ä–∞–±–æ—Ç—É | ‚úÖ | ‚ùå | ‚úÖ |
| –û—Ç–∫–ª–æ–Ω–∏—Ç—å —Ä–∞–±–æ—Ç—É | ‚úÖ | ‚ùå | ‚úÖ |
| –í–∑—è—Ç—å –≤ —Ä–∞–±–æ—Ç—É –ø–æ—Å–ª–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è | ‚ùå | ‚úÖ | ‚úÖ |

---

## –°–í–Ø–ó–ò –ú–ï–ñ–î–£ –°–£–©–ù–û–°–¢–Ø–ú–ò

### –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ —Å–≤—è–∑–µ–π:

```
users (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
  ‚îú‚îÄ‚îÄ role: 'client' / 'contractor' / 'admin'
  ‚îî‚îÄ‚îÄ –°–≤—è–∑–∞–Ω—ã —Å organizations —á–µ—Ä–µ–∑ user_organizations

user_organizations (—Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è)
  ‚îú‚îÄ‚îÄ user_id ‚Üí users.id
  ‚îú‚îÄ‚îÄ organization_id ‚Üí organizations.id
  ‚îî‚îÄ‚îÄ role: 'owner' / 'admin' / 'employee'

organizations (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
  ‚îú‚îÄ‚îÄ type: 'client' / 'contractor'
  ‚îú‚îÄ‚îÄ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∏ –≤–ª–∞–¥–µ—é—Ç objects
  ‚îî‚îÄ‚îÄ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è works

objects (–æ–±—ä–µ–∫—Ç—ã)
  ‚îú‚îÄ‚îÄ client_id ‚Üí organizations.id (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–∑–∞–∫–∞–∑—á–∏–∫)
  ‚îî‚îÄ‚îÄ –°–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ works

works (—Ä–∞–±–æ—Ç—ã)
  ‚îú‚îÄ‚îÄ object_id ‚Üí objects.id
  ‚îú‚îÄ‚îÄ contractor_id ‚Üí organizations.id (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–ø–æ–¥—Ä—è–¥—á–∏–∫)
  ‚îú‚îÄ‚îÄ contractor_organization_id ‚Üí organizations.id (–¥—É–±–ª—å)
  ‚îî‚îÄ‚îÄ template_id ‚Üí work_templates.id (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

work_templates (—Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞–±–æ—Ç)
  ‚îî‚îÄ‚îÄ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è works

client_contractors (—Å–≤—è–∑—å –∑–∞–∫–∞–∑—á–∏–∫-–ø–æ–¥—Ä—è–¥—á–∏–∫)
  ‚îú‚îÄ‚îÄ client_id ‚Üí organizations.id (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–∑–∞–∫–∞–∑—á–∏–∫)
  ‚îî‚îÄ‚îÄ contractor_id ‚Üí organizations.id (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–ø–æ–¥—Ä—è–¥—á–∏–∫)
```

### –ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞:

**–î–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–∑–∞–∫–∞–∑—á–∏–∫–∞:**
1. –í–∏–¥–∏—Ç –æ–±—ä–µ–∫—Ç—ã, –≥–¥–µ `objects.client_id IN (–º–æ–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)`
2. –í–∏–¥–∏—Ç —Ä–∞–±–æ—Ç—ã, –≥–¥–µ `works.object_id IN (–æ–±—ä–µ–∫—Ç—ã –º–æ–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π)`
3. –ú–æ–∂–µ—Ç –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—ã –ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º –∏–∑ `client_contractors`, –≥–¥–µ `client_id IN (–º–æ–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)`

**–î–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞:**
1. –í–∏–¥–∏—Ç —Ä–∞–±–æ—Ç—ã, –≥–¥–µ `works.contractor_organization_id IN (–º–æ–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)`
2. –í–∏–¥–∏—Ç –æ–±—ä–µ–∫—Ç—ã, –≥–¥–µ `objects.id IN (–æ–±—ä–µ–∫—Ç—ã —Å —Ä–∞–±–æ—Ç–∞–º–∏ –º–æ–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π)`

**–î–ª—è –∞–¥–º–∏–Ω–∞:**
- –í–∏–¥–∏—Ç –≤—Å—ë –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

---

## –¢–ò–ü–ò–ß–ù–´–ô –°–¶–ï–ù–ê–†–ò–ô –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### –≠—Ç–∞–ø 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (–ó–∞–∫–∞–∑—á–∏–∫)
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è ‚Üí `role = 'client'`
2. –ü—Ä–æ—Ö–æ–¥–∏—Ç –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
3. –°–æ–∑–¥–∞—ë—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–û–û–û –°—Ç—Ä–æ–π-–ò–Ω–≤–µ—Å—Ç"
   - –ò–ù–ù: 7707123456
4. –°—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ (`user_organizations.role = 'owner'`)

### –≠—Ç–∞–ø 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Ä—è–¥—á–∏–∫–æ–≤
5. –ó–∞–∫–∞–∑—á–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç "–ü–æ–¥—Ä—è–¥—á–∏–∫–∏"
6. –ù–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥—Ä—è–¥—á–∏–∫–∞"
7. –í–≤–æ–¥–∏—Ç –ò–ù–ù –ø–æ–¥—Ä—è–¥–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏: 7707654321
8. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç/–Ω–∞—Ö–æ–¥–∏—Ç –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é "–û–û–û –ú–æ–Ω—Ç–∞–∂-–°—Ç—Ä–æ–π"
9. –°–æ–∑–¥–∞—ë—Ç—Å—è —Å–≤—è–∑—å –≤ `client_contractors`

### –≠—Ç–∞–ø 3: –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∏ —Ä–∞–±–æ—Ç
10. –ó–∞–∫–∞–∑—á–∏–∫ —Å–æ–∑–¥–∞—ë—Ç –æ–±—ä–µ–∫—Ç:
    - –ù–∞–∑–≤–∞–Ω–∏–µ: "–ñ–ö –°–æ–ª–Ω–µ—á–Ω—ã–π, –∫–æ—Ä–ø—É—Å 3"
    - –ê–¥—Ä–µ—Å: "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –õ–µ–Ω–∏–Ω–∞, 15"
    - `client_id` = ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ "–û–û–û –°—Ç—Ä–æ–π-–ò–Ω–≤–µ—Å—Ç"
11. –°–æ–∑–¥–∞—ë—Ç —Ä–∞–±–æ—Ç—É:
    - –í—ã–±–∏—Ä–∞–µ—Ç —à–∞–±–ª–æ–Ω "–í–æ–∑–≤–µ–¥–µ–Ω–∏–µ –∫–∏—Ä–ø–∏—á–Ω—ã—Ö —Å—Ç–µ–Ω"
    - –ö–æ–Ω–∫—Ä–µ—Ç–∏–∑–∏—Ä—É–µ—Ç: "–í–æ–∑–≤–µ–¥–µ–Ω–∏–µ –∫–∏—Ä–ø–∏—á–Ω—ã—Ö —Å—Ç–µ–Ω, 3 —ç—Ç–∞–∂, —Å–µ–∫—Ü–∏—è –ê"
    - –ù–∞–∑–Ω–∞—á–∞–µ—Ç –ø–æ–¥—Ä—è–¥—á–∏–∫–∞: "–û–û–û –ú–æ–Ω—Ç–∞–∂-–°—Ç—Ä–æ–π"
    - `contractor_organization_id` = ID –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ "–û–û–û –ú–æ–Ω—Ç–∞–∂-–°—Ç—Ä–æ–π"

### –≠—Ç–∞–ø 4: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã (–ü–æ–¥—Ä—è–¥—á–∏–∫)
12. –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ "–û–û–û –ú–æ–Ω—Ç–∞–∂-–°—Ç—Ä–æ–π" –≤–∏–¥–∏—Ç —Ä–∞–±–æ—Ç—É
13. –ù–∞—á–∏–Ω–∞–µ—Ç —Ä–∞–±–æ—Ç—É ‚Üí —Å—Ç–∞—Ç—É—Å `in_progress`
14. –î–æ–±–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ –∏ –º–∞—Ç–µ—Ä–∏–∞–ª—ã
15. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É ‚Üí —Å—Ç–∞—Ç—É—Å `on_review`

### –≠—Ç–∞–ø 5: –ü—Ä–∏—ë–º–∫–∞ (–ó–∞–∫–∞–∑—á–∏–∫)
16. –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ "–û–û–û –°—Ç—Ä–æ–π-–ò–Ω–≤–µ—Å—Ç" –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
17. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É
18. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç ‚Üí —Å—Ç–∞—Ç—É—Å `completed`

---

## DATABASE SCHEMA

```sql
-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
users:
  id SERIAL PRIMARY KEY
  phone VARCHAR(20) UNIQUE NOT NULL
  role VARCHAR(20) NOT NULL -- 'client' / 'contractor' / 'admin'
  full_name VARCHAR(255)
  onboarding_completed BOOLEAN DEFAULT FALSE

-- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
organizations:
  id SERIAL PRIMARY KEY
  name VARCHAR(255) NOT NULL
  inn VARCHAR(20) UNIQUE NOT NULL
  kpp VARCHAR(20)
  ogrn VARCHAR(20)
  type VARCHAR(20) -- 'client' / 'contractor'
  legal_address TEXT
  actual_address TEXT
  phone VARCHAR(50)
  email VARCHAR(255)
  status VARCHAR(20) DEFAULT 'active'
  created_by INT REFERENCES users(id)
  created_at TIMESTAMP DEFAULT NOW()

-- –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
user_organizations:
  id SERIAL PRIMARY KEY
  user_id INT NOT NULL REFERENCES users(id)
  organization_id INT NOT NULL REFERENCES organizations(id)
  role VARCHAR(20) -- 'owner' / 'admin' / 'employee'
  created_at TIMESTAMP DEFAULT NOW()
  UNIQUE(user_id, organization_id)

-- –°–≤—è–∑—å –∑–∞–∫–∞–∑—á–∏–∫-–ø–æ–¥—Ä—è–¥—á–∏–∫
client_contractors:
  id SERIAL PRIMARY KEY
  client_id INT NOT NULL REFERENCES organizations(id)
  contractor_id INT NOT NULL REFERENCES organizations(id)
  added_at TIMESTAMP DEFAULT NOW()
  UNIQUE(client_id, contractor_id)

-- –û–±—ä–µ–∫—Ç—ã
objects:
  id SERIAL PRIMARY KEY
  title VARCHAR(255) NOT NULL
  address TEXT
  description TEXT
  client_id INT NOT NULL REFERENCES organizations(id) -- –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–∑–∞–∫–∞–∑—á–∏–∫
  status VARCHAR(20) DEFAULT 'active'
  created_at TIMESTAMP DEFAULT NOW()
  updated_at TIMESTAMP DEFAULT NOW()

-- –†–∞–±–æ—Ç—ã
works:
  id SERIAL PRIMARY KEY
  title VARCHAR(255) NOT NULL
  description TEXT
  object_id INT NOT NULL REFERENCES objects(id) ON DELETE CASCADE
  contractor_id INT REFERENCES organizations(id) -- –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è-–ø–æ–¥—Ä—è–¥—á–∏–∫
  contractor_organization_id INT REFERENCES organizations(id) -- –¥—É–±–ª—å
  template_id INT NOT NULL REFERENCES work_templates(id) -- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û
  status VARCHAR(20) DEFAULT 'pending'
  work_status VARCHAR(20) DEFAULT 'planned'
  start_date DATE
  end_date DATE
  planned_start_date DATE
  planned_end_date DATE
  completion_percentage INT DEFAULT 0
  photos JSONB DEFAULT '[]'
  materials JSONB DEFAULT '[]'
  created_at TIMESTAMP DEFAULT NOW()
  updated_at TIMESTAMP DEFAULT NOW()

-- –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–∞–±–æ—Ç
work_templates:
  id SERIAL PRIMARY KEY
  code VARCHAR(50) NOT NULL UNIQUE
  title TEXT NOT NULL
  description TEXT
  category VARCHAR(255)
  normative_ref VARCHAR(255)
  material_types TEXT
  control_points JSONB
  created_at TIMESTAMP DEFAULT NOW()
```

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

–≠—Ç–æ –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å —É—á—ë—Ç–æ–º **–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**.

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–±—ä–µ–∫—Ç—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç **–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º-–∑–∞–∫–∞–∑—á–∏–∫–∞–º**, –∞ –Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –†–∞–±–æ—Ç—ã –Ω–∞–∑–Ω–∞—á–∞—é—Ç—Å—è **–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º-–ø–æ–¥—Ä—è–¥—á–∏–∫–∞–º**, –∞ –Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —è–≤–ª—è—é—Ç—Å—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π —á–µ—Ä–µ–∑ `user_organizations`
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö
- –†–∞–±–æ—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –¢–û–õ–¨–ö–û –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ (`template_id` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω)
- –õ—é–±–æ–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–±—ä–µ–∫—Ç–∞–º–∏/—Ä–∞–±–æ—Ç–∞–º–∏ —Å–≤–æ–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

–ü–æ —ç—Ç–æ–º—É –¥–æ–∫—É–º–µ–Ω—Ç—É –º–æ–∂–Ω–æ –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–∞ –≤–∞—à–µ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ! üöÄ
